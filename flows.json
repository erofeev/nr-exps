[
    {
        "id": "c5511a26687b7408",
        "type": "tab",
        "label": "Video stream - analytics",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5c4ee4d8d1ed06e6",
        "type": "tab",
        "label": "Video stream - ffmpeg on /dev/video0",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ad23bd66d9ba1ebc",
        "type": "tab",
        "label": "Video from Onvif",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "0a5ac1dcb64b7376",
        "type": "tab",
        "label": "Local broker",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7dad7a056c3e824a",
        "type": "tab",
        "label": "Systemd",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "244d1c7c92f9ed23",
        "type": "tab",
        "label": "NR-thing",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ef8a80e9c499bb4e",
        "type": "subflow",
        "name": "Zip-64",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 160,
                "wires": [
                    {
                        "id": "2b65109daddacd99"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 660,
                "y": 160,
                "wires": [
                    {
                        "id": "82c8c3f3ba6e95db",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "5e1c22f8.d65d2c",
        "type": "ui_group",
        "name": "group 2",
        "tab": "b6843d96.72b57",
        "order": 2,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "b6843d96.72b57",
        "type": "ui_tab",
        "name": "Video Recogn",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "0664e1e74d71b332",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "4bd4c4a3bf0645b2",
        "type": "mqtt-broker",
        "name": "",
        "broker": "127.0.0.1",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "2b65109daddacd99",
        "type": "json",
        "z": "ef8a80e9c499bb4e",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 170,
        "y": 160,
        "wires": [
            [
                "065c1f970061c074"
            ]
        ]
    },
    {
        "id": "065c1f970061c074",
        "type": "zip",
        "z": "ef8a80e9c499bb4e",
        "name": "",
        "mode": "compress",
        "filename": "",
        "compressionlevel": "9",
        "outasstring": false,
        "x": 320,
        "y": 160,
        "wires": [
            [
                "82c8c3f3ba6e95db"
            ]
        ]
    },
    {
        "id": "82c8c3f3ba6e95db",
        "type": "base64",
        "z": "ef8a80e9c499bb4e",
        "name": "",
        "action": "",
        "property": "payload",
        "x": 500,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "4c6b4c62a8ed88f6",
        "type": "debug",
        "z": "c5511a26687b7408",
        "name": "Recognized Objects",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "classes",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 400,
        "wires": []
    },
    {
        "id": "4308d9ead8d8e1f4",
        "type": "tensorflowCoco",
        "z": "c5511a26687b7408",
        "name": "",
        "modelUrl": "http://127.0.0.1:1880/coco/model.json",
        "scoreThreshold": 0.5,
        "passthru": "bbox",
        "lineColour": "magenta",
        "x": 370,
        "y": 220,
        "wires": [
            [
                "d76d65a1f77108a3",
                "953e0fa554546fda",
                "89919261e43461f9"
            ]
        ]
    },
    {
        "id": "953e0fa554546fda",
        "type": "image",
        "z": "c5511a26687b7408",
        "name": "",
        "width": "400",
        "data": "image",
        "dataType": "msg",
        "thumbnail": false,
        "active": false,
        "pass": false,
        "outputs": 0,
        "x": 640,
        "y": 20,
        "wires": []
    },
    {
        "id": "89919261e43461f9",
        "type": "jimp-image",
        "z": "c5511a26687b7408",
        "name": "",
        "data": "http://127.0.0.1:1880/pipe2jpeg/flow02/image.jpeg",
        "dataType": "str",
        "ret": "buf",
        "parameter1": "",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 230,
        "y": 100,
        "wires": [
            [
                "4308d9ead8d8e1f4",
                "7ca000e9f1df1cc6",
                "6ceab159093ddba6"
            ]
        ]
    },
    {
        "id": "1ead1fe45dca8334",
        "type": "status",
        "z": "c5511a26687b7408",
        "name": "",
        "scope": [
            "4308d9ead8d8e1f4"
        ],
        "x": 80,
        "y": 280,
        "wires": [
            [
                "89919261e43461f9"
            ]
        ]
    },
    {
        "id": "300aaa4bd8811f25",
        "type": "inject",
        "z": "c5511a26687b7408",
        "name": "Start [Manual]",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 220,
        "wires": [
            [
                "89919261e43461f9"
            ]
        ]
    },
    {
        "id": "11c316ffd640fe82",
        "type": "link out",
        "z": "c5511a26687b7408",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "b180c51d784367aa"
        ],
        "x": 885,
        "y": 340,
        "wires": []
    },
    {
        "id": "d76d65a1f77108a3",
        "type": "function",
        "z": "c5511a26687b7408",
        "name": "Set MQTT topic",
        "func": "var l_payload = msg.classes;\ndelete msg.payload;\nmsg.payload = msg.classes;\nmsg.topic = \"edge/00001/image/recognition/objects\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 340,
        "wires": [
            [
                "4c6b4c62a8ed88f6",
                "654d0b8537cb27e7"
            ]
        ]
    },
    {
        "id": "7ca000e9f1df1cc6",
        "type": "mobilenet",
        "z": "c5511a26687b7408",
        "d": true,
        "name": "",
        "x": 320,
        "y": 380,
        "wires": [
            [
                "89919261e43461f9"
            ]
        ]
    },
    {
        "id": "6ceab159093ddba6",
        "type": "cocossd",
        "z": "c5511a26687b7408",
        "d": true,
        "name": "",
        "x": 340,
        "y": 460,
        "wires": [
            [
                "e289920a755f583b"
            ]
        ]
    },
    {
        "id": "e289920a755f583b",
        "type": "image",
        "z": "c5511a26687b7408",
        "name": "",
        "width": "400",
        "data": "annotatedInput",
        "dataType": "msg",
        "thumbnail": true,
        "active": false,
        "pass": false,
        "outputs": 0,
        "x": 580,
        "y": 620,
        "wires": []
    },
    {
        "id": "654d0b8537cb27e7",
        "type": "rbe",
        "z": "c5511a26687b7408",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 770,
        "y": 340,
        "wires": [
            [
                "11c316ffd640fe82"
            ]
        ]
    },
    {
        "id": "0a927ee38d9eb797",
        "type": "debug",
        "z": "5c4ee4d8d1ed06e6",
        "name": "playlist",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "status",
        "statusType": "msg",
        "x": 870,
        "y": 360,
        "wires": []
    },
    {
        "id": "582bc462badab651",
        "type": "pipe2jpeg",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "basePath": "flow02",
        "serveHttp": "true",
        "bufferType": "array",
        "x": 610,
        "y": 380,
        "wires": [
            [
                "0a927ee38d9eb797"
            ],
            []
        ]
    },
    {
        "id": "8e5c93727d697b65",
        "type": "ffmpeg",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "outputs": 5,
        "cmdPath": "ffmpeg",
        "cmdArgs": "[\"-loglevel\",\"+level+error\",\"-hide_banner\",\"-nostats\",\"-s\",\"320x200\",\"-re\",\"-f\",\"video4linux2\",\"-hwaccel\",\"rpi\",\"-re\",\"-i\",\"/dev/video0\",\"-f\",\"image2pipe\",\"-b:v\",\"128M\",\"pipe:1\",\"-progress\",\"pipe:3\",\"-s\",\"320x200\",\"-f\",\"mp4\",\"-b:v\",\"128M\",\"-movflags\",\"+frag_keyframe+empty_moov+default_base_moof\",\"pipe:4\"]",
        "cmdOutputs": 4,
        "killSignal": "SIGTERM",
        "x": 360,
        "y": 420,
        "wires": [
            [
                "582bc462badab651",
                "91e39e733be8cc42",
                "2a6282a64a69cfa6"
            ],
            [
                "582bc462badab651"
            ],
            [
                "448249ed3bfcbeb9"
            ],
            [
                "cc0c4be63dbb7130"
            ],
            [
                "2a6282a64a69cfa6"
            ]
        ]
    },
    {
        "id": "e48b5139096d44e1",
        "type": "inject",
        "z": "5c4ee4d8d1ed06e6",
        "name": "start",
        "props": [
            {
                "p": "action",
                "v": "{\"command\":\"start\"}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 380,
        "wires": [
            [
                "8e5c93727d697b65"
            ]
        ]
    },
    {
        "id": "7f9bd3bf9d7cecae",
        "type": "inject",
        "z": "5c4ee4d8d1ed06e6",
        "name": "stop",
        "props": [
            {
                "p": "action",
                "v": "{\"command\":\"stop\"}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 440,
        "wires": [
            [
                "8e5c93727d697b65"
            ]
        ]
    },
    {
        "id": "3fb5bdd5b271cc2d",
        "type": "delay",
        "z": "5c4ee4d8d1ed06e6",
        "name": "delay",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 390,
        "y": 200,
        "wires": [
            [
                "8e5c93727d697b65"
            ]
        ]
    },
    {
        "id": "91e39e733be8cc42",
        "type": "function",
        "z": "5c4ee4d8d1ed06e6",
        "name": "restart",
        "func": "const { status, code, signal, killed } = msg.payload;\n\n\nif (status === 'close' && killed === false) {\n    return { action: { command: 'start' }, delay: 5000 };\n}\n\nreturn;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 200,
        "wires": [
            [
                "3fb5bdd5b271cc2d"
            ]
        ]
    },
    {
        "id": "9fc4a18ac87396e0",
        "type": "comment",
        "z": "5c4ee4d8d1ed06e6",
        "name": "- - - - - daemonize - - - - -",
        "info": "",
        "x": 330,
        "y": 165,
        "wires": []
    },
    {
        "id": "cc0c4be63dbb7130",
        "type": "function",
        "z": "5c4ee4d8d1ed06e6",
        "name": "progress",
        "func": "const props = msg.payload.toString().split('\\n');\n\nconst progress = {};\n\nprops.forEach(item => {\n    \n    const [name, value] = item.split('=');\n    \n    if (name && value) {\n    \n        progress[name] = value;\n\n    }\n    \n});\n\nconst color = progress['progress'] === 'continue' ? 'green' : 'red';\n\nconst message = `fps: ${progress['fps']}, bitrate: ${progress['bitrate']}`;\n\nnode.status({ fill: color, shape: 'dot', text: message });\n\nreturn { payload: progress };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 580,
        "wires": [
            [
                "a7bc704d39f09df6"
            ]
        ]
    },
    {
        "id": "a7bc704d39f09df6",
        "type": "debug",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 580,
        "wires": []
    },
    {
        "id": "8acecafd1c145bc0",
        "type": "comment",
        "z": "5c4ee4d8d1ed06e6",
        "name": "- - - - - progress logs - - - - -",
        "info": "",
        "x": 739,
        "y": 545,
        "wires": []
    },
    {
        "id": "9e8b63c333b9a099",
        "type": "debug",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 480,
        "wires": []
    },
    {
        "id": "448249ed3bfcbeb9",
        "type": "function",
        "z": "5c4ee4d8d1ed06e6",
        "name": "errors",
        "func": "const { payload } = msg;\n\nreturn { payload: payload.toString() };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 480,
        "wires": [
            [
                "9e8b63c333b9a099"
            ]
        ]
    },
    {
        "id": "1701d80f603364df",
        "type": "comment",
        "z": "5c4ee4d8d1ed06e6",
        "name": "- - - - - error logs - - - - -",
        "info": "",
        "x": 728,
        "y": 445,
        "wires": []
    },
    {
        "id": "2a6282a64a69cfa6",
        "type": "mp4frag",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "outputs": 2,
        "basePath": "abcfr",
        "serveHttp": "true",
        "serveIo": "true",
        "hlsPlaylistSize": "10",
        "hlsPlaylistExtra": "10",
        "autoStart": "true",
        "preBuffer": "5",
        "timeLimit": "-1",
        "repeated": "false",
        "statusData": "playlist",
        "x": 600,
        "y": 280,
        "wires": [
            [
                "0a927ee38d9eb797",
                "d522b653166c3e04"
            ],
            [
                "8a7dd43df97ee231",
                "b4c851af1799eb37"
            ]
        ]
    },
    {
        "id": "d522b653166c3e04",
        "type": "ui_mp4frag",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "group": "5e1c22f8.d65d2c",
        "order": 1,
        "width": 6,
        "height": 4,
        "readyPoster": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAMAAACtqHJCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzgwMTE3NDA3MjA2ODExODIyQUIzREQ3RTA0MDAyNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRkU5MkM4RDJCNTkxMUVCQjJCOTg0MEQ0QThCQ0YyQyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRkU5MkM4QzJCNTkxMUVCQjJCOTg0MEQ0QThCQ0YyQyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Rjc3RjExNzQwNzIwNjgxMTgyMkFDQTkzQjdGQkY1MzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDM4MDExNzQwNzIwNjgxMTgyMkFCM0REN0UwNDAwMjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7USCkmAAAAM1BMVEUAplH///9Cs3HR6dqc0rDp9O1rwIy43sUmrWJ9xpn0+vbF5NBYun+q2LuNzKTd7+P///8HAxLBAAAAEXRSTlP/////////////////////ACWtmWIAAA6fSURBVHja7d1rY6JIGoBRI6gIXub//9qZ7o4KRdVbZezuJLvnfNpJektujyAg2fwDFG0sAhAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCAgEEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEBAIIBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAgIBAQCAgGBgEAsAhAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCAgEEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEBAIIBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAgIBAQCAgGBgEAsAhAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCAgEEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEBAIIBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQIAkEAAAAAAAAAAAAAAAAAAAAAAAgD/v0u/efjj0228/L33/c1be+t56/d92+rWi33aZnw2b7fv/6n7+/PZfN12/n/2/0t++b0H3PMbZT6dsIskI1/64+lUXzsQP558/OdxeaL5Rv/9su57WTLPrMdcjJb9cT+TwPtO7IZrR5ctXlmNxwsprp7IwCN2229mPjr9+Mm4qgfxY88e2FTt0yc+P9UB+TMKlKZDLvL35LPyYh7vpMURmWrt9bcz7ZF6TkLfFibwNcqnN6Nt13xpIacLKa6eyMAjd1vZp9e7SNQTy37tfy4odrqtfXFoC+e+Vh4ZAzvONYtn9Y7aG2RRt422wMOb7OLvVdrgtBbLL/P9rL18LpDRhwdqJFwahaf2Wfrgv3IZA7oVEK/aQ+c22KZDkpbtwHma7wmm1BRxnW0l+Wi+VMTO/WEzVaiILO5C4gVogpQkL1k68MIg/bq7fS673n7QEcksrWLH78pbfuN3EgSze00+LbXNK33mv5Vcat/GYm+K87POBFHYg8cvXAilNWLB24oVB6Lj+vDfeF21TILvq5j1lf3Vq3G6GWiBDptf7z4Yk+3MwJ3085k9d+26utAMpvfy5JZDihAVrJ14YNJ3G6lbbxrYxkPe1VF6xw/xD43AonRuKNtswkFNuU7omm9Awf7MvvNJYGTOdl+1hcbyYTmRpBxK/fCWQ0oSFaydcGISG1ee9/eP4Nh/Ir386nJefQsrb8HG+L3gc1F1L282v8ftx9u/CQI6LDWJaHjqeV6fmVsNdduudWnbM9byc5zuJZCKLO5D45eOjyeKEhWsnXBjEdunu91LaLrdJS/3iv8sr9pyc8h3TV8yu4sfR/lDZavrlCdPlO+11ORFTblq364/p2TEz8/KWOXDrFgdju00lkOTlK4GUJixcO+HCINal756zpRcHsjy0La/Y9ETZtfAhJB1/9u/CreZ2Tn95ZicJ/zpPIB1uKp0r6tKzRYV5mdaj7uvns7MvXwmkNGHx2okWBrFz+nlvKh36p6vgvgVv4xWbJjgVjoDT8Q+PfxduNb8mY0wuDi/n67TYQtLh1qfy8mMW5+W6HrW8A4lfvhJIacLitRMtDJ48zzt7e6kE0uU++JYD2a43/KZALpWt5n0bPS5LX56e6xfHGKXzTX1lzOK87FajBjuQ4ssfGgIpTVi8dqKFQWyfXhLPXFD70oG8vx9Op2QrH+ejTdmLccVASmO2BxLsQF4JpDhhlbUTLAxi2+QD3Ha2//0WgRxvqzspfZofDY2LI6NqIKUxmwOJdiCvBFKcsMraCRYGFePynN9+9p/fIpD+9q92y9LnW/1pOXI1kNKYzYFEO5BXAilOWGXtBAuDiuvyI1s/Wz/fIpDD7f1wWpY+zK4V9MvrANVr3qUxWwPZRjuQuM84kOKEVdZOsDCoSLbXc/HM/hcN5Hrr+5y8zvWxDU3Lj7Sl00j76piNgRzCN+kXAilOWGXtBAuDxtNYl9VZ3u8RyHhb831yZqd/HHePy7fbdLhucXk8GrMLvmj0GHUb303+QiDFCasFUl4YVByXa3M3W/DfIZDt/Tf7ZLN8nOk5JleOk+GOb/nfZ8ZsC+SQBtd2HWRfDaQ8YbVAyguDitNy8yhf/PuagRzvH3CH9C7I3W3GzskngsVw2/NbOkHlMZsCqexA4h1Yy21nuZmtBFJeGNQszvOeyjf1fVYg8ZX0/rExjsk/Ot82vGty5Xgb3G4ej9kUSGUHUtqB1W76jGe2FkhxYVCzmzdxnNfykUDWXzb8aCBt92IdVnd1j+nB46V0SjT/5eFozJZAdrXvsxZ2YKdNvBzjma0FUlwY1Ezzld6X73r9y4E03s3bPbauQ3qP0bjYYvsokPHSNGZLIG+177OGO7AwkGBma4EUFwY15/mSPMyX32cG0vp9kPFxW+vqbO1U2GBzW+h5aBnzmUDOTwUSfLf/0DKz1UCmtnpZWZxl7HLfEvy7gTz1jcJhNk3HwgXx1UWJ7CuNp4YxnwlkfCaQy6YhkGhmq4GUFgY1+/k73pg7Hv7MQCrfSd/PDglP6Vv3UHhDrzy0IRjzmUCKJ4rCI7wokGhmq4EMTXs3NqU34Z/LfQi+N/E5gVSuns3vmxhWX0S9PvWAg64+5lOBdM8cYnUNgUQzWw2ktDCoGldfztxtvkogtedinecHGqvHJPTJnih7nvXYvWXPiObGfCqQ0oM9831O9UCima0HUlgYVF0f39+8ZFfW370Osuij9mTFbj5Wl57GOmWfb1D8zuuhOuZzgZyfCaT0dK3Gma0HUlgYVB0eZzb67CnHzwqk4dm843zs8+oUzZh7Qs5quO3yY3Uw5nOBjA3XQfbTcqut33aWn9l6IIWFQdXsxrdD8M27vxzIruXp7sNiS+xXn44fT7IdgkCWt/xHY7YFMh6eud29fyvfvdA+sw2B5BcGVbMzhtfFQv3cW02iLTo5bLguZ+S8mrXllePVcIvnSERjtgXSn8KP6enLj43PxQpntiGQ/MKg6vQ4BB+zx7VfN5D8Z6bHIfb9IVx9ONxhfnInGrPl+yA/PgJfo4/p6cufG5+LFc5sQyD5hUHdfZ0sd+LfIJDzco2vR+hyL1YM5FIbsymQS/aZ4OWXb33sTzizDYHkFwbNp7F2tytR128TSP652G8vBRKN2RLI/HnRY0sgrd9JD2dWIH/QbckPl/x9QV83kF1+mzm9Ekg0ZvNjfw7BFbn05feNgYQzK5A/6H7G8Jy/v+fLBjLkN5nZZvl8IOGYTz84rvt9gcQzK5A/6LaPP4YPN/iCgZzeyjc4fjSQcMzmQO5v99vfFkg8swL5C6ex+uvyCOXLB3IsbDPTC4GEY7YHEnxM/2Ag8cwK5A+67bwPyWfcz314dUMgfWGbuT4ZyPyh7eGYhXnZNSytlwOJZzZeOwJ5ze3pisky/tw/f9AQSOG8zuw0Vlsg80t14Zhp3N38y7PLUbvix/QPBhLPbLx2BPKaLn+A8ql/QKclkNUfulhd6W4K5DjfmMIxk3m5lZXbtC/FGwM/GEg8s/HaEchrDvmbUD/zT7A1BbLaF63OrrYE0i8OVsIxb/OyG9YfNEp3kGx/UyDxzMZrRyCv6eOvf/7dP+IZBLK8mzHzl2BWH43DQHJTG4+5nJflA0lKd5D0HwpkNWWVmd1Wz3gL5OOOmS8mbD7rz0C3B7L+Y5TH9H3zmUB+7uIqY3blRZBu96fS/HwskMqExWtHIK9ZLt3hqUCO1UD20VdMXwmkXw2V/rnKpwLpZ2/LpTH39SsRq5voj78lkMqEbes7EIF8XP5rPi2BnDfVQJKPOKULaM8HclgfrKXz8EQg03xai2NO1X1olx4CTY2BdOFyrExY7WmRAnnJNfve3hDIYdMQyHB9a3jix/OBXNcH+ekF7PZApsWSKI457EoHi6tASufrSsdi13A5Vias9rRIgbxkyi7VaiC746YlkM3QRXv+DwcyrgdLL7q0BnKfk+qY26T2cV881XbIf0xP/+HikkVxOVYmLF47AvmNp7H6xkC6fl89bHk8w22cv1mH3yNqDuSUOVpLTx01BTKbk5Yxz4s36aF8Lnq/PClc/IfTbLdaWo61CYvXjkC+vkv/64jg0G+///vJ7eEWvpsHAAAAAAAAAAAAAAAAAAAAAAAAwP+Xf4AigYBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCAgEEAgIBgYBAQCAgEBAICAQEAggEBAICAYGAQEAgIBAQCAgEBAIIBAQCAgGBgEBAICAQEAgIBBAICAQEAgIBgYBAQCAgEBAICAQQCAgEBAICAYGAQEAgIBAQCAgEEAgIBAQCAgGBgEBAICAQEAggEBAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBBAICAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCCAQEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEAAgYBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCAgEEAgIBgYBAQCAgEBAICAQEAggEBAICAYGAQEAgIBAQCAgEBAIk/gX38R0SGa0LJgAAAABJRU5ErkJggg==",
        "errorPoster": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAMAAACtqHJCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzgwMTE3NDA3MjA2ODExODIyQUIzREQ3RTA0MDAyNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRkU5MkM5MTJCNTkxMUVCQjJCOTg0MEQ0QThCQ0YyQyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRkU5MkM5MDJCNTkxMUVCQjJCOTg0MEQ0QThCQ0YyQyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Rjc3RjExNzQwNzIwNjgxMTgyMkFDQTkzQjdGQkY1MzAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDM4MDExNzQwNzIwNjgxMTgyMkFCM0REN0UwNDAwMjQiLz4gPC9yZGY6RGVzY3Jp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",
        "hlsJsConfig": "{\"liveDurationInfinity\":true,\"liveBackBufferLength\":5,\"maxBufferLength\":10,\"manifestLoadingTimeOut\":1000,\"manifestLoadingMaxRetry\":10,\"manifestLoadingRetryDelay\":500}",
        "autoplay": "true",
        "unload": "true",
        "threshold": 0.5,
        "controls": "true",
        "muted": "false",
        "players": [
            "mp4",
            "hls.js",
            "hls",
            "socket.io"
        ],
        "x": 890,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "c8ba55c8da1afa8d",
        "type": "comment",
        "z": "5c4ee4d8d1ed06e6",
        "name": "- view mp4 -",
        "info": "",
        "x": 889,
        "y": 65,
        "wires": []
    },
    {
        "id": "fc90ed7a9aefdb33",
        "type": "function",
        "z": "5c4ee4d8d1ed06e6",
        "name": "filename",
        "func": "const { payload } = msg;\n\nif (Buffer.isBuffer(payload)) {\n\n    msg.filename = context.get('filename');\n    \n    return msg;\n}\n\nconst { status } = payload;\n\nif (status === 'spawn') {\n\n    context.set('filename', `/tmp/A${Date.now()}.mp4`);\n\n    \n} else if (status === 'close') {\n    \n    context.set('filename', undefined);\n\n}\n\nreturn;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is deployed.\n\ncontext.set('filename', undefined);",
        "finalize": "// Code added here will be run when the\n// node is being stopped or re-deployed.\n\ncontext.set('filename', undefined);",
        "libs": [],
        "x": 1040,
        "y": 200,
        "wires": [
            [
                "b661874b2ce68313"
            ]
        ]
    },
    {
        "id": "b4c851af1799eb37",
        "type": "ffmpeg",
        "z": "5c4ee4d8d1ed06e6",
        "d": true,
        "name": "",
        "outputs": 2,
        "cmdPath": "",
        "cmdArgs": "[\"-f\",\"mp4\",\"-i\",\"pipe:0\",\"-c:v\",\"copy\",\"-c:a\",\"copy\",\"-f\",\"mp4\",\"-movflags\",\"+faststart+empty_moov\",\"pipe:1\"]",
        "cmdOutputs": 1,
        "killSignal": "SIGTERM",
        "x": 879,
        "y": 200,
        "wires": [
            [
                "fc90ed7a9aefdb33"
            ],
            [
                "fc90ed7a9aefdb33"
            ]
        ]
    },
    {
        "id": "b661874b2ce68313",
        "type": "file",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1180,
        "y": 200,
        "wires": [
            [
                "8c3c142cfc2a8f86"
            ]
        ]
    },
    {
        "id": "8c3c142cfc2a8f86",
        "type": "debug",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1310,
        "y": 200,
        "wires": []
    },
    {
        "id": "8a7dd43df97ee231",
        "type": "function",
        "z": "5c4ee4d8d1ed06e6",
        "d": true,
        "name": "filename",
        "func": "const { payload, action } = msg;\n\nif (Buffer.isBuffer(payload)) {\n\n    msg.filename = context.get('filename');\n    \n    return msg;\n}\n\nif (typeof action === 'object') {\n    const { command } = action;\n    \n    if (command === 'start') {\n        \n        context.set('filename', `/tmp/AR${Date.now()}.mp4`);\n        \n    } else if (command === 'stop') {\n        \n        context.set('filename', undefined);\n        \n    }\n}\n\nreturn;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is deployed.\n\ncontext.set('filename', undefined);",
        "finalize": "// Code added here will be run when the\n// node is being stopped or re-deployed.\n\ncontext.set('filename', undefined);",
        "libs": [],
        "x": 880,
        "y": 300,
        "wires": [
            [
                "4742bddba9dfd7be"
            ]
        ]
    },
    {
        "id": "4742bddba9dfd7be",
        "type": "file",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1020,
        "y": 300,
        "wires": [
            [
                "c89a174f9fdbba06"
            ]
        ]
    },
    {
        "id": "c89a174f9fdbba06",
        "type": "debug",
        "z": "5c4ee4d8d1ed06e6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 300,
        "wires": []
    },
    {
        "id": "9019366cb7e6fbab",
        "type": "comment",
        "z": "5c4ee4d8d1ed06e6",
        "name": "- - - - - - - - - save raw mp4 files - - - - - - - - - -",
        "info": "",
        "x": 990,
        "y": 260,
        "wires": []
    },
    {
        "id": "90834c0b9aebc74a",
        "type": "comment",
        "z": "5c4ee4d8d1ed06e6",
        "name": "- - - - - - - - - - - - - - - - - save processed mp4 files - - - - - - - - - - - - - - - - - ",
        "info": "",
        "x": 1069,
        "y": 165,
        "wires": []
    },
    {
        "id": "e24401fbd1d10059",
        "type": "exec",
        "z": "ad23bd66d9ba1ebc",
        "command": "ffmpeg -f rtsp -i \"rtsp://192.168.1.166:554/stream.sdp\" -f image2pipe pipe:1",
        "addpay": false,
        "append": "",
        "useSpawn": "true",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "Decode RTSP stream",
        "x": 640,
        "y": 440,
        "wires": [
            [
                "b8b8225b596d722b"
            ],
            [],
            []
        ]
    },
    {
        "id": "60aaa246fc59eb74",
        "type": "inject",
        "z": "ad23bd66d9ba1ebc",
        "name": "Start stream",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 440,
        "wires": [
            [
                "e24401fbd1d10059"
            ]
        ]
    },
    {
        "id": "b8b8225b596d722b",
        "type": "image",
        "z": "ad23bd66d9ba1ebc",
        "name": "",
        "width": "400",
        "data": "payload",
        "dataType": "msg",
        "thumbnail": false,
        "active": true,
        "pass": false,
        "outputs": 0,
        "x": 870,
        "y": 420,
        "wires": []
    },
    {
        "id": "6709590698aec4c4",
        "type": "inject",
        "z": "ad23bd66d9ba1ebc",
        "name": "Pause all streams",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "SIGSTOP",
        "payloadType": "str",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "a5d9f6ed392f938f"
            ]
        ]
    },
    {
        "id": "b0f0bea8b2498b9e",
        "type": "inject",
        "z": "ad23bd66d9ba1ebc",
        "name": "Resume all streams",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "SIGCONT",
        "payloadType": "str",
        "x": 170,
        "y": 520,
        "wires": [
            [
                "a5d9f6ed392f938f"
            ]
        ]
    },
    {
        "id": "a5d9f6ed392f938f",
        "type": "change",
        "z": "ad23bd66d9ba1ebc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kill",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 480,
        "wires": [
            [
                "e24401fbd1d10059"
            ]
        ]
    },
    {
        "id": "7b8259a61f72f811",
        "type": "inject",
        "z": "ad23bd66d9ba1ebc",
        "name": "Stop all streams",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "SIGTERM",
        "payloadType": "str",
        "x": 160,
        "y": 560,
        "wires": [
            [
                "a5d9f6ed392f938f"
            ]
        ]
    },
    {
        "id": "46cf100259112d0b",
        "type": "inject",
        "z": "ad23bd66d9ba1ebc",
        "name": "Start searching",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 660,
        "wires": [
            [
                "05c30ea4192cd11a"
            ]
        ]
    },
    {
        "id": "477452a55992e768",
        "type": "debug",
        "z": "ad23bd66d9ba1ebc",
        "name": "Onvif devices",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload.XAddrs",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 660,
        "wires": []
    },
    {
        "id": "05c30ea4192cd11a",
        "type": "onvif-discovery",
        "z": "ad23bd66d9ba1ebc",
        "name": "",
        "timeout": "10",
        "separate": true,
        "x": 370,
        "y": 660,
        "wires": [
            [
                "477452a55992e768"
            ]
        ]
    },
    {
        "id": "6a15f912273b7310",
        "type": "config",
        "z": "ad23bd66d9ba1ebc",
        "name": "",
        "properties": [
            {
                "p": "thing.id",
                "pt": "flow",
                "to": "onvif:000-000-001",
                "tot": "str"
            },
            {
                "p": "thing.type",
                "pt": "flow",
                "to": "onvif",
                "tot": "str"
            },
            {
                "p": "thing.rtsp_url",
                "pt": "flow",
                "to": "",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 350,
        "y": 140,
        "wires": []
    },
    {
        "id": "cb55b82ff1831db4",
        "type": "link in",
        "z": "ad23bd66d9ba1ebc",
        "name": "Startup",
        "links": [
            "7fd78dc7b1f6d400"
        ],
        "x": 185,
        "y": 140,
        "wires": [
            [
                "6a15f912273b7310",
                "ed9c805b277886bc"
            ]
        ]
    },
    {
        "id": "ed9c805b277886bc",
        "type": "function",
        "z": "ad23bd66d9ba1ebc",
        "name": "Get device config",
        "func": "msg.payload = flow.get('thing');\nmsg.topic = flow.get('thing.id') + '/config';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 200,
        "wires": [
            [
                "2ee7d7c6e6cb2b90",
                "1d1dda9e6cd73349"
            ]
        ]
    },
    {
        "id": "2ee7d7c6e6cb2b90",
        "type": "link out",
        "z": "ad23bd66d9ba1ebc",
        "name": "Send out config",
        "mode": "link",
        "links": [
            "0c0aceacf53dbdb2"
        ],
        "x": 595,
        "y": 200,
        "wires": []
    },
    {
        "id": "48c0cad249bb0bd3",
        "type": "comment",
        "z": "ad23bd66d9ba1ebc",
        "name": "Systemd event: local MQTT is up and running",
        "info": "",
        "x": 230,
        "y": 80,
        "wires": []
    },
    {
        "id": "ab1ccc6060ed9ec9",
        "type": "comment",
        "z": "ad23bd66d9ba1ebc",
        "name": "MQTT cmd:",
        "info": "",
        "x": 130,
        "y": 260,
        "wires": []
    },
    {
        "id": "fd52a5a3f8150eea",
        "type": "link in",
        "z": "ad23bd66d9ba1ebc",
        "name": "000-onvif-cam-001/cmd",
        "links": [],
        "x": 85,
        "y": 320,
        "wires": [
            [
                "98c921b4ad0436f4"
            ]
        ]
    },
    {
        "id": "dbe54dabd3af311c",
        "type": "link out",
        "z": "ad23bd66d9ba1ebc",
        "name": "link out 2",
        "mode": "return",
        "links": [],
        "x": 575,
        "y": 320,
        "wires": []
    },
    {
        "id": "98c921b4ad0436f4",
        "type": "switch",
        "z": "ad23bd66d9ba1ebc",
        "name": "",
        "property": "payload.cmd",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Stop",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 320,
        "wires": [
            [
                "2578c9c776b0b5bb"
            ],
            [
                "fa66381b69b5290f"
            ]
        ]
    },
    {
        "id": "2578c9c776b0b5bb",
        "type": "function",
        "z": "ad23bd66d9ba1ebc",
        "name": "cmd = Start",
        "func": "msg.payload = \"Started\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 300,
        "wires": [
            [
                "41999a673447a990"
            ]
        ]
    },
    {
        "id": "fa66381b69b5290f",
        "type": "function",
        "z": "ad23bd66d9ba1ebc",
        "name": "cmd = Stop",
        "func": "msg.payload = \"Stopped\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 340,
        "wires": [
            [
                "dbe54dabd3af311c"
            ]
        ]
    },
    {
        "id": "1d1dda9e6cd73349",
        "type": "function",
        "z": "ad23bd66d9ba1ebc",
        "name": "Status = Ready",
        "func": "msg.topic = flow.get('thing.id') + '/status';\nmsg.payload = \"READY\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 240,
        "wires": [
            [
                "2ee7d7c6e6cb2b90"
            ]
        ]
    },
    {
        "id": "41999a673447a990",
        "type": "wifiscan",
        "z": "ad23bd66d9ba1ebc",
        "name": "",
        "x": 410,
        "y": 580,
        "wires": [
            [
                "dbe54dabd3af311c"
            ]
        ]
    },
    {
        "id": "d39a2a12003b3d0c",
        "type": "mqtt out",
        "z": "0a5ac1dcb64b7376",
        "name": "Local MQTT",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "4bd4c4a3bf0645b2",
        "x": 950,
        "y": 300,
        "wires": []
    },
    {
        "id": "0c0aceacf53dbdb2",
        "type": "link in",
        "z": "0a5ac1dcb64b7376",
        "name": "Send_to_local_MQTT",
        "links": [
            "2ee7d7c6e6cb2b90",
            "44dcc6e937ddcf2f",
            "d0ebda896319b268"
        ],
        "x": 355,
        "y": 300,
        "wires": [
            [
                "b222876faf3dbe44"
            ]
        ]
    },
    {
        "id": "7a03b0e09e17a739",
        "type": "link call",
        "z": "0a5ac1dcb64b7376",
        "name": "Send cmd to executor",
        "links": [],
        "linkType": "dynamic",
        "timeout": "3",
        "x": 700,
        "y": 520,
        "wires": [
            [
                "31ab7a164df227b3"
            ]
        ]
    },
    {
        "id": "605ff753aaa2ec37",
        "type": "mqtt in",
        "z": "0a5ac1dcb64b7376",
        "name": "",
        "topic": "+/cmd",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "4bd4c4a3bf0645b2",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 520,
        "wires": [
            [
                "e92e95bfe589b71a"
            ]
        ]
    },
    {
        "id": "7efe4d813240b6e5",
        "type": "debug",
        "z": "0a5ac1dcb64b7376",
        "name": "DBG: MQTT CMD received",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "target",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 560,
        "wires": []
    },
    {
        "id": "31ab7a164df227b3",
        "type": "function",
        "z": "0a5ac1dcb64b7376",
        "name": "Set result: /status ",
        "func": "if (!msg.target) {\n    return;\n}\nmsg.target = msg.topic;\n\nconst match = '\\/cmd$';\nconst modifier = \"i\";\nconst pattern = new RegExp(match, modifier);\n\nmsg.topic = msg.target.replace(pattern, '/status');\n\nif (msg.error) {\n    msg.payload = msg.error.message + ' cmd=' + JSON.stringify(msg.payload);\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 400,
        "wires": [
            [
                "d39a2a12003b3d0c"
            ]
        ]
    },
    {
        "id": "98cdc9feea4db013",
        "type": "catch",
        "z": "0a5ac1dcb64b7376",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 120,
        "y": 400,
        "wires": [
            [
                "12e05052ec68dc2b",
                "31ab7a164df227b3"
            ]
        ]
    },
    {
        "id": "fb8852506dcc978d",
        "type": "mqtt in",
        "z": "0a5ac1dcb64b7376",
        "name": "",
        "topic": "+/+/cmd",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "4bd4c4a3bf0645b2",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 600,
        "wires": [
            [
                "e92e95bfe589b71a"
            ]
        ]
    },
    {
        "id": "688bd8fae41ef688",
        "type": "aedes broker",
        "z": "0a5ac1dcb64b7376",
        "name": "",
        "mqtt_port": 1883,
        "mqtt_ws_bind": "port",
        "mqtt_ws_port": "",
        "mqtt_ws_path": "",
        "cert": "",
        "key": "",
        "certname": "",
        "keyname": "",
        "dburl": "",
        "usetls": false,
        "x": 150,
        "y": 40,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "f66169967adecccd",
        "type": "status",
        "z": "0a5ac1dcb64b7376",
        "name": "Status of [MQTT out] node",
        "scope": [
            "688bd8fae41ef688"
        ],
        "x": 170,
        "y": 140,
        "wires": [
            [
                "6e2c4bf97dc377c7"
            ]
        ]
    },
    {
        "id": "6e2c4bf97dc377c7",
        "type": "switch",
        "z": "0a5ac1dcb64b7376",
        "name": "if connected",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node-red:common.status.connected",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 140,
        "wires": [
            [
                "522595dc6450492c"
            ]
        ]
    },
    {
        "id": "f11d4ba78ac67aba",
        "type": "link out",
        "z": "0a5ac1dcb64b7376",
        "name": "Notify Systemd",
        "mode": "link",
        "links": [
            "3379f24a2db7b97f"
        ],
        "x": 755,
        "y": 200,
        "wires": []
    },
    {
        "id": "f65c24a2e8699276",
        "type": "function",
        "z": "0a5ac1dcb64b7376",
        "name": "Set broker id and Notify to Systemd",
        "func": "const serialId = msg.payload.replace(/\\0.*$/, \"\");\n\nif (serialId) {\n    global.set(\"broker.id\", serialId);\n    msg.payload = \"local_MQTT_broker_is_up [\" + serialId + ']';\n    return msg;\n}\n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 200,
        "wires": [
            [
                "f11d4ba78ac67aba"
            ]
        ]
    },
    {
        "id": "522595dc6450492c",
        "type": "file in",
        "z": "0a5ac1dcb64b7376",
        "name": "",
        "filename": "/sys/firmware/devicetree/base/serial-number",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 670,
        "y": 140,
        "wires": [
            [
                "f65c24a2e8699276"
            ]
        ]
    },
    {
        "id": "12e05052ec68dc2b",
        "type": "debug",
        "z": "0a5ac1dcb64b7376",
        "name": "Flow errors",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 330,
        "y": 400,
        "wires": []
    },
    {
        "id": "b222876faf3dbe44",
        "type": "function",
        "z": "0a5ac1dcb64b7376",
        "name": "Add /broker-id",
        "func": "msg.topic = global.get(\"broker.id\") + \"/\" + msg.topic;\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 300,
        "wires": [
            [
                "0fe1e5eb67cef2d4"
            ]
        ]
    },
    {
        "id": "0fe1e5eb67cef2d4",
        "type": "function",
        "z": "0a5ac1dcb64b7376",
        "name": "Set retained for /config",
        "func": "const match = '\\/config$';\nconst topic = msg.topic;\nconst found = topic.match(match);\n\nif (found) {\n    msg.qos = 2;\n    msg.retain = true;\n}\ndelete msg.topic;\nmsg.topic = topic;//\"rpi10000000ffebcc55/000-onvif-cam-001/config\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 300,
        "wires": [
            [
                "d39a2a12003b3d0c"
            ]
        ]
    },
    {
        "id": "e92e95bfe589b71a",
        "type": "function",
        "z": "0a5ac1dcb64b7376",
        "name": "Remove broker namespace and set target",
        "func": "const match = new RegExp('^' + global.get(\"broker.id\") + '/');\nconst topic = msg.topic.replace(match, \"\");\nmsg.target = topic;\n\nreturn  msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 520,
        "wires": [
            [
                "7a03b0e09e17a739",
                "7efe4d813240b6e5"
            ]
        ]
    },
    {
        "id": "a5483cba60e1e74b",
        "type": "comment",
        "z": "0a5ac1dcb64b7376",
        "name": "On boot (when MQTT broker becomes accessible) we send notification to Systemd",
        "info": "",
        "x": 350,
        "y": 100,
        "wires": []
    },
    {
        "id": "9e56d6f66f14364d",
        "type": "comment",
        "z": "0a5ac1dcb64b7376",
        "name": "Publisher interface",
        "info": "",
        "x": 150,
        "y": 260,
        "wires": []
    },
    {
        "id": "1da4282812077bda",
        "type": "comment",
        "z": "0a5ac1dcb64b7376",
        "name": "Report error status of cmd execution",
        "info": "",
        "x": 200,
        "y": 360,
        "wires": []
    },
    {
        "id": "e56a58b82d7ed0ec",
        "type": "comment",
        "z": "0a5ac1dcb64b7376",
        "name": "Subscribe for cmd, execute and report user status of cmd execution",
        "info": "",
        "x": 300,
        "y": 480,
        "wires": []
    },
    {
        "id": "3379f24a2db7b97f",
        "type": "link in",
        "z": "7dad7a056c3e824a",
        "name": "Systemd Events",
        "links": [
            "f11d4ba78ac67aba"
        ],
        "x": 355,
        "y": 340,
        "wires": [
            [
                "b233b21f97fd0586"
            ]
        ]
    },
    {
        "id": "7fd78dc7b1f6d400",
        "type": "link out",
        "z": "7dad7a056c3e824a",
        "name": "Stage - MQTT broker is UP",
        "mode": "link",
        "links": [
            "cb55b82ff1831db4",
            "ae96a900f52429fb"
        ],
        "x": 695,
        "y": 140,
        "wires": []
    },
    {
        "id": "a685559a453cb2db",
        "type": "comment",
        "z": "7dad7a056c3e824a",
        "name": "Local MQTT broker is up, send notifications",
        "info": "",
        "x": 740,
        "y": 100,
        "wires": []
    },
    {
        "id": "b233b21f97fd0586",
        "type": "switch",
        "z": "7dad7a056c3e824a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "local_MQTT_broker_is_up",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 450,
        "y": 340,
        "wires": [
            [
                "7fd78dc7b1f6d400",
                "7bc41172cc2c35d1"
            ]
        ]
    },
    {
        "id": "7bc41172cc2c35d1",
        "type": "debug",
        "z": "7dad7a056c3e824a",
        "name": "DBG: Systemd Events",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 40,
        "wires": []
    },
    {
        "id": "2ecd957924ab53da",
        "type": "config",
        "z": "244d1c7c92f9ed23",
        "name": "",
        "properties": [
            {
                "p": "thing.id",
                "pt": "flow",
                "to": "node-red:000-000-001",
                "tot": "str"
            },
            {
                "p": "thing.type",
                "pt": "flow",
                "to": "node-red",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 330,
        "y": 100,
        "wires": []
    },
    {
        "id": "ae96a900f52429fb",
        "type": "link in",
        "z": "244d1c7c92f9ed23",
        "name": "Startup",
        "links": [
            "7fd78dc7b1f6d400"
        ],
        "x": 165,
        "y": 100,
        "wires": [
            [
                "2ecd957924ab53da",
                "914739e285571d1a"
            ]
        ]
    },
    {
        "id": "d9c1a6e37b884cf3",
        "type": "function",
        "z": "244d1c7c92f9ed23",
        "name": "Get device config",
        "func": "msg.topic = flow.get('thing.id') + '/config';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 160,
        "wires": [
            [
                "d0ebda896319b268",
                "ed0b91cbe912541f"
            ]
        ]
    },
    {
        "id": "d0ebda896319b268",
        "type": "link out",
        "z": "244d1c7c92f9ed23",
        "name": "Send out config",
        "mode": "link",
        "links": [
            "0c0aceacf53dbdb2"
        ],
        "x": 685,
        "y": 160,
        "wires": []
    },
    {
        "id": "ed0b91cbe912541f",
        "type": "function",
        "z": "244d1c7c92f9ed23",
        "name": "Status = Ready",
        "func": "msg.topic = flow.get('thing.id') + '/status';\nmsg.payload = \"READY\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 200,
        "wires": [
            [
                "d0ebda896319b268"
            ]
        ]
    },
    {
        "id": "914739e285571d1a",
        "type": "http request",
        "z": "244d1c7c92f9ed23",
        "name": "Get all flows",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "localhost:1880/flows",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Node-RED-API-Version",
                "valueType": "other",
                "valueValue": "v2"
            }
        ],
        "x": 290,
        "y": 160,
        "wires": [
            [
                "d9c1a6e37b884cf3"
            ]
        ]
    },
    {
        "id": "97a1788f30bd8ac5",
        "type": "comment",
        "z": "244d1c7c92f9ed23",
        "name": "MQTT cmd:",
        "info": "",
        "x": 210,
        "y": 280,
        "wires": []
    },
    {
        "id": "d61cd4f325847874",
        "type": "link in",
        "z": "244d1c7c92f9ed23",
        "name": "node-red:000-000-001/cmd",
        "links": [],
        "x": 165,
        "y": 340,
        "wires": [
            [
                "670cb22e39c0d632"
            ]
        ]
    },
    {
        "id": "3425f2cc13bd6388",
        "type": "link out",
        "z": "244d1c7c92f9ed23",
        "name": "link out 3",
        "mode": "return",
        "links": [],
        "x": 765,
        "y": 340,
        "wires": []
    },
    {
        "id": "670cb22e39c0d632",
        "type": "switch",
        "z": "244d1c7c92f9ed23",
        "name": "",
        "property": "payload.cmd",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "execute",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 270,
        "y": 340,
        "wires": [
            [
                "77c23579e0ae95c7"
            ]
        ]
    },
    {
        "id": "77c23579e0ae95c7",
        "type": "function",
        "z": "244d1c7c92f9ed23",
        "name": "cmd = Execute",
        "func": "msg.payload = msg.payload.data.flows;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 340,
        "wires": [
            [
                "5eb406c2febcc77c"
            ]
        ]
    },
    {
        "id": "5eb406c2febcc77c",
        "type": "http request",
        "z": "244d1c7c92f9ed23",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "localhost:1880/flows",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Content-type",
                "valueType": "other",
                "valueValue": "application/json"
            },
            {
                "keyType": "other",
                "keyValue": "Node-RED-API-Version",
                "valueType": "other",
                "valueValue": "v1"
            },
            {
                "keyType": "other",
                "keyValue": "Node-RED-Deployment-Type",
                "valueType": "other",
                "valueValue": "full"
            }
        ],
        "x": 630,
        "y": 340,
        "wires": [
            [
                "3425f2cc13bd6388"
            ]
        ]
    }
]